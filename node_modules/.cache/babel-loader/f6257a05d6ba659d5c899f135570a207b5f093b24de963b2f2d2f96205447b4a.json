{"ast":null,"code":"import React from 'react';\nimport { select } from 'd3-selection';\nimport DefaultNodeElement from './DefaultNodeElement.js';\nexport default class Node extends React.Component {\n  constructor() {\n    super(...arguments);\n    this.nodeRef = null;\n    this.state = {\n      transform: this.setTransform(this.props.position, this.props.parent, this.props.orientation, true),\n      initialStyle: {\n        opacity: 0\n      },\n      wasClicked: false\n    };\n    this.shouldNodeTransform = (ownProps, nextProps) => nextProps.subscriptions !== ownProps.subscriptions || nextProps.position.x !== ownProps.position.x || nextProps.position.y !== ownProps.position.y || nextProps.orientation !== ownProps.orientation;\n    // TODO: needs tests\n    this.renderNodeElement = () => {\n      const {\n        data,\n        hierarchyPointNode,\n        renderCustomNodeElement\n      } = this.props;\n      const renderNode = typeof renderCustomNodeElement === 'function' ? renderCustomNodeElement : DefaultNodeElement;\n      const nodeProps = {\n        hierarchyPointNode: hierarchyPointNode,\n        nodeDatum: data,\n        toggleNode: this.handleNodeToggle,\n        onNodeClick: this.handleOnClick,\n        onNodeMouseOver: this.handleOnMouseOver,\n        onNodeMouseOut: this.handleOnMouseOut\n      };\n      return renderNode(nodeProps);\n    };\n    this.handleNodeToggle = () => {\n      this.setState({\n        wasClicked: true\n      });\n      this.props.onNodeToggle(this.props.data.__rd3t.id);\n    };\n    this.handleOnClick = evt => {\n      this.setState({\n        wasClicked: true\n      });\n      this.props.onNodeClick(this.props.hierarchyPointNode, evt);\n    };\n    this.handleOnMouseOver = evt => {\n      this.props.onNodeMouseOver(this.props.hierarchyPointNode, evt);\n    };\n    this.handleOnMouseOut = evt => {\n      this.props.onNodeMouseOut(this.props.hierarchyPointNode, evt);\n    };\n  }\n  componentDidMount() {\n    this.commitTransform();\n  }\n  componentDidUpdate() {\n    if (this.state.wasClicked) {\n      this.props.centerNode(this.props.hierarchyPointNode);\n      this.setState({\n        wasClicked: false\n      });\n    }\n    this.commitTransform();\n  }\n  shouldComponentUpdate(nextProps) {\n    return this.shouldNodeTransform(this.props, nextProps);\n  }\n  setTransform(position, parent, orientation) {\n    let shouldTranslateToOrigin = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n    if (shouldTranslateToOrigin) {\n      const hasParent = parent !== null && parent !== undefined;\n      const originX = hasParent ? parent.x : 0;\n      const originY = hasParent ? parent.y : 0;\n      return orientation === 'horizontal' ? `translate(${originY},${originX})` : `translate(${originX},${originY})`;\n    }\n    return orientation === 'horizontal' ? `translate(${position.y},${position.x})` : `translate(${position.x},${position.y})`;\n  }\n  applyTransform(transform, transitionDuration) {\n    let opacity = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n    let done = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : () => {};\n    if (this.props.enableLegacyTransitions) {\n      select(this.nodeRef)\n      // @ts-ignore\n      .transition().duration(transitionDuration).attr('transform', transform).style('opacity', opacity).on('end', done);\n    } else {\n      select(this.nodeRef).attr('transform', transform).style('opacity', opacity);\n      done();\n    }\n  }\n  commitTransform() {\n    const {\n      orientation,\n      transitionDuration,\n      position,\n      parent\n    } = this.props;\n    const transform = this.setTransform(position, parent, orientation);\n    this.applyTransform(transform, transitionDuration);\n  }\n  componentWillLeave(done) {\n    const {\n      orientation,\n      transitionDuration,\n      position,\n      parent\n    } = this.props;\n    const transform = this.setTransform(position, parent, orientation, true);\n    this.applyTransform(transform, transitionDuration, 0, done);\n  }\n  render() {\n    const {\n      data,\n      nodeClassName\n    } = this.props;\n    return React.createElement(\"g\", {\n      id: data.__rd3t.id,\n      ref: n => {\n        this.nodeRef = n;\n      },\n      style: this.state.initialStyle,\n      className: [data.children && data.children.length > 0 ? 'rd3t-node' : 'rd3t-leaf-node', nodeClassName].join(' ').trim(),\n      transform: this.state.transform\n    }, this.renderNodeElement());\n  }\n}","map":{"version":3,"names":["React","select","DefaultNodeElement","Node","Component","constructor","arguments","nodeRef","state","transform","setTransform","props","position","parent","orientation","initialStyle","opacity","wasClicked","shouldNodeTransform","ownProps","nextProps","subscriptions","x","y","renderNodeElement","data","hierarchyPointNode","renderCustomNodeElement","renderNode","nodeProps","nodeDatum","toggleNode","handleNodeToggle","onNodeClick","handleOnClick","onNodeMouseOver","handleOnMouseOver","onNodeMouseOut","handleOnMouseOut","setState","onNodeToggle","__rd3t","id","evt","componentDidMount","commitTransform","componentDidUpdate","centerNode","shouldComponentUpdate","shouldTranslateToOrigin","length","undefined","hasParent","originX","originY","applyTransform","transitionDuration","done","enableLegacyTransitions","transition","duration","attr","style","on","componentWillLeave","render","nodeClassName","createElement","ref","n","className","children","join","trim"],"sources":["/home/ubuntu/repo/architec_of_computer_1/hanoi-react/node_modules/react-d3-tree/lib/esm/Node/index.js"],"sourcesContent":["import React from 'react';\nimport { select } from 'd3-selection';\nimport DefaultNodeElement from './DefaultNodeElement.js';\nexport default class Node extends React.Component {\n    constructor() {\n        super(...arguments);\n        this.nodeRef = null;\n        this.state = {\n            transform: this.setTransform(this.props.position, this.props.parent, this.props.orientation, true),\n            initialStyle: {\n                opacity: 0,\n            },\n            wasClicked: false,\n        };\n        this.shouldNodeTransform = (ownProps, nextProps) => nextProps.subscriptions !== ownProps.subscriptions ||\n            nextProps.position.x !== ownProps.position.x ||\n            nextProps.position.y !== ownProps.position.y ||\n            nextProps.orientation !== ownProps.orientation;\n        // TODO: needs tests\n        this.renderNodeElement = () => {\n            const { data, hierarchyPointNode, renderCustomNodeElement } = this.props;\n            const renderNode = typeof renderCustomNodeElement === 'function' ? renderCustomNodeElement : DefaultNodeElement;\n            const nodeProps = {\n                hierarchyPointNode: hierarchyPointNode,\n                nodeDatum: data,\n                toggleNode: this.handleNodeToggle,\n                onNodeClick: this.handleOnClick,\n                onNodeMouseOver: this.handleOnMouseOver,\n                onNodeMouseOut: this.handleOnMouseOut,\n            };\n            return renderNode(nodeProps);\n        };\n        this.handleNodeToggle = () => {\n            this.setState({ wasClicked: true });\n            this.props.onNodeToggle(this.props.data.__rd3t.id);\n        };\n        this.handleOnClick = evt => {\n            this.setState({ wasClicked: true });\n            this.props.onNodeClick(this.props.hierarchyPointNode, evt);\n        };\n        this.handleOnMouseOver = evt => {\n            this.props.onNodeMouseOver(this.props.hierarchyPointNode, evt);\n        };\n        this.handleOnMouseOut = evt => {\n            this.props.onNodeMouseOut(this.props.hierarchyPointNode, evt);\n        };\n    }\n    componentDidMount() {\n        this.commitTransform();\n    }\n    componentDidUpdate() {\n        if (this.state.wasClicked) {\n            this.props.centerNode(this.props.hierarchyPointNode);\n            this.setState({ wasClicked: false });\n        }\n        this.commitTransform();\n    }\n    shouldComponentUpdate(nextProps) {\n        return this.shouldNodeTransform(this.props, nextProps);\n    }\n    setTransform(position, parent, orientation, shouldTranslateToOrigin = false) {\n        if (shouldTranslateToOrigin) {\n            const hasParent = parent !== null && parent !== undefined;\n            const originX = hasParent ? parent.x : 0;\n            const originY = hasParent ? parent.y : 0;\n            return orientation === 'horizontal'\n                ? `translate(${originY},${originX})`\n                : `translate(${originX},${originY})`;\n        }\n        return orientation === 'horizontal'\n            ? `translate(${position.y},${position.x})`\n            : `translate(${position.x},${position.y})`;\n    }\n    applyTransform(transform, transitionDuration, opacity = 1, done = () => { }) {\n        if (this.props.enableLegacyTransitions) {\n            select(this.nodeRef)\n                // @ts-ignore\n                .transition()\n                .duration(transitionDuration)\n                .attr('transform', transform)\n                .style('opacity', opacity)\n                .on('end', done);\n        }\n        else {\n            select(this.nodeRef)\n                .attr('transform', transform)\n                .style('opacity', opacity);\n            done();\n        }\n    }\n    commitTransform() {\n        const { orientation, transitionDuration, position, parent } = this.props;\n        const transform = this.setTransform(position, parent, orientation);\n        this.applyTransform(transform, transitionDuration);\n    }\n    componentWillLeave(done) {\n        const { orientation, transitionDuration, position, parent } = this.props;\n        const transform = this.setTransform(position, parent, orientation, true);\n        this.applyTransform(transform, transitionDuration, 0, done);\n    }\n    render() {\n        const { data, nodeClassName } = this.props;\n        return (React.createElement(\"g\", { id: data.__rd3t.id, ref: n => {\n                this.nodeRef = n;\n            }, style: this.state.initialStyle, className: [\n                data.children && data.children.length > 0 ? 'rd3t-node' : 'rd3t-leaf-node',\n                nodeClassName,\n            ]\n                .join(' ')\n                .trim(), transform: this.state.transform }, this.renderNodeElement()));\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}